---
title: 'Development'
description: 'Set up Griffin for local development'
---

<Info>
  **Prerequisites**:
  - Node.js version 18 or higher
  - TypeScript
  - Access to the [Griffin repository](https://github.com/griffin-open-source/griffin)
</Info>

Follow these steps to set up Griffin for local development and contribute to the project.

<Steps>
<Step title="Clone the repository">

```bash
git clone https://github.com/griffin-open-source/griffin.git
cd griffin
```
</Step>

<Step title="Build the TypeScript projects">

Griffin consists of multiple TypeScript packages. Build them in order:

```bash
# Build the test system DSL
cd griffin-test-system
npm install
npm run build

# Build the plan executor
cd ../griffin-plan-executor
npm install
npm run build

# Build the CLI
cd ../@griffin-app/griffin
npm install
npm run build
```

</Step>

<Step title="Set up the sample API (optional)">

For testing Griffin functionality, you can run the sample API server:

```bash
cd sample-apis
npm install
npm run dev
```

This starts a simple JSON API server on `http://localhost:3000` with basic CRUD operations.

</Step>

<Step title="Create and run a monitor">

Create a monitor file in a `__griffin__` directory:

```typescript
// __griffin__/dev-test.ts
import { GET, ApiCheckBuilder, JSON, START, END, Frequency } from "../griffin-test-system/src/index";

const builder = new ApiCheckBuilder({
  name: "dev-check",
  endpoint_host: "http://localhost:3000"
});

const plan = builder
  .addEndpoint("health", { 
    method: GET, 
    response_format: JSON, 
    path: "/health" 
  })
  .addEdge(START, "health")
  .addEdge("health", END);

plan.create({ frequency: Frequency.every(1).minute() });
```

Run the test using the built CLI:

```bash
node @griffin-app/griffin/dist/cli.js run-local
```

</Step>
</Steps>

## Project Structure

Griffin is organized into separate packages:

<AccordionGroup>
  <Accordion title="griffin-test-system">
    The TypeScript DSL library for defining API monitors. Monitors are written in TypeScript and output JSON monitor definitions.
    
    **Location**: `griffin-test-system/`
    
    **Key files**:
    - `src/index.ts` - Main exports
    - `src/ApiCheckBuilder.ts` - Builder class for monitors
  </Accordion>

  <Accordion title="griffin-plan-executor">
    Executes JSON monitor definitions. Can run monitors locally or remotely (e.g., in a Lambda function).
    
    **Location**: `griffin-plan-executor/`
    
    **Key files**:
    - `src/executor.ts` - Main execution logic
    - `src/graph.ts` - Graph-based execution following edges
  </Accordion>

  <Accordion title="@griffin-app/griffin">
    CLI tool for discovering monitors, running them locally, and managing remote execution.
    
    **Location**: `@griffin-app/griffin/`
    
    **Key files**:
    - `src/cli.ts` - CLI entry point
    - `src/discovery.ts` - Monitor file discovery
  </Accordion>

  <Accordion title="griffin-runner">
    Orchestration service for scheduling and executing monitors. Stores results in PostgreSQL.
    
    **Location**: `griffin-runner/`
    
    **Key files**:
    - API endpoints for test management
    - Scheduler for frequency-based execution
  </Accordion>
</AccordionGroup>

## Development Workflow

### Running Monitors Locally

1. Start your API server (or use the sample API)
2. Create monitor files in `__griffin__` directories
3. Run `node @griffin-app/griffin/dist/cli.js run-local` to execute all discovered monitors

### Making Changes

When making changes to the codebase:

1. Make your changes in the relevant package
2. Rebuild the package: `npm run build`
3. If you changed `griffin-test-system`, rebuild it first as other packages depend on it
4. Test your changes by running the CLI

### Monitor File Discovery

Griffin discovers monitor files by:
- Looking for `__griffin__` subdirectories
- Finding all `.ts` files within those directories
- Each monitor file should export a monitor created with the builder

## Current Status

<Warning>
  Some features are still in development. Check the repository README for the latest status.
</Warning>

âœ… **Working**:
- CLI monitor discovery and execution
- TypeScript DSL for creating monitors
- JSON monitor execution with endpoints and waits
- Local monitor execution against development servers

ðŸš§ **In Development**:
- Assertion evaluation (structure in place, needs implementation)
- Remote runner deployment
- Monitor scheduling and orchestration
- Log viewing and remote execution

## Contributing

<Note>
  Contributions are welcome! Please check the repository for contribution guidelines and open issues.
</Note>

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test thoroughly
5. Submit a pull request

## Troubleshooting

<AccordionGroup>
  <Accordion title="Monitors not being discovered">
    Make sure:
    - Monitor files are in `__griffin__` subdirectories
    - Files have `.ts` extension
    - Monitor files properly import and use the builder
  </Accordion>

  <Accordion title="Build errors">
    Ensure all dependencies are installed:
    
    ```bash
    # In each package directory
    npm install
    npm run build
    ```
    
    Build packages in dependency order: test-system â†’ plan-executor â†’ cli
  </Accordion>

  <Accordion title="Import errors in monitor files">
    When developing locally, you may need to use relative paths to import from `griffin-core`:
    
    ```typescript
    import { ... } from "../griffin-test-system/src/index";
    ```
    
    Once published, you'll be able to use:
    
    ```typescript
    import { ... } from "griffin-test-system";
    ```
  </Accordion>
</AccordionGroup>
